{%extends 'fhir/base.html'%}
{%block url1%}'{%url 'fhir:hanhchinh' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url2%}'{%url 'fhir:dangky' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url3%}'{%url 'fhir:hoibenh' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url5%}'{%url 'fhir:xetnghiem' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url4%}'{%url 'fhir:toanthan' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%comment%}{%block url8%}'{%url 'fhir:thuthuat' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}{%endcomment%}{%block url7%}'{%url 'fhir:thuoc' group_name user_name data.Patient.identifier data.Encounter.identifier %}'{%endblock%}
{%block url6%}'{%url 'fhir:hinhanh' group_name user_name data.Patient.identifier data.Encounter.identifier %}'{%endblock%}
{%block function%}
{% load widget_tweaks %}
<h1>THÔNG TIN KHÁM BỆNH</h1>
{% comment %}
    {%if observations%}
        {%for observation in observations%}
            <p>{{observation.observation_code}}: {{observation.observation_value_quantity}} {{observation.observation_value_unit}}</p>
        {%endfor%}
    {%else%}     
        <form action="" method="POST">
            {%csrf_token%}
            <label for="1">Mạch</label>
            <input type="text" name="1" id="1">
            <p style="display: inline;">lần/ph</p>
            <br>
            <label for="2">Nhiệt độ</label>
            <input type="text" name="2" id="2">
            <p style="display: inline;">Cel</p>
            <br>
            <label for="3">Huyết áp</label>
            <input type="text" name="3" id="3">
            <p style="display: inline;">mmHg</p>
            <br>
            <label for="4">Nhịp thở</label>
            <input type="text" name="4" id="4">
            <p style="display: inline;">lần/ph</p>
            <br>
            <label for="5">Cân nặng</label>
            <input type="text" name="5" id="5">
            <p style="display: inline;">kg</p>
            <br>
            <button type="submit">Lưu lại</button>
        </form>
    {%endif%}
{% endcomment %}
{% comment %}
{% if conditions or observations %}
    <div>
        <div>
            <h2>1. Toàn thân</h2>
            {% for condition in conditions.toanthan %}
                <p> {{condition.condition_code}} </p>
            {% endfor %}
        </div>
        <div>
            <p>Mạch: {{ observations.mach.observation_value_quantity }} lần/ph</p>
            <p>Nhiệt độ: {{ observations.nhietdo.observation_value_quantity }} Cel</p>
            <p>Huyết áp: {{ observations.tamthu.observation_value_quantity }}/{{ observation.tamtruong.observation_value_quantity }} mmHg</p>
            <p>Nhịp thở: {{ observations.nhiptho.observation_value_quantity }} lần/ph</p>
            <p>Cân nặng: {{ observations.cannang.observation_value_quantity }} kg</p>
        </div>
    </div>
    <div>
        <h2>Các cơ quan</h2>
        <div>
            <h3>+ Tuần hoàn</h3>
            {% for condition in conditions.tuanhoan %}
                <p>{{ condition.condition_code }}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Hô hấp</h3>
            {% for condition in conditions.hohap %}
                <p>{{ condition.condition_code }}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Tiêu hóa</h3>
            {% for condition in conditions.tieuhoa %}
                <p>{{ condition.condition_code }}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Thận - Tiết niệu - Sinh dục</h3>
            {% for condition in conditions.tts %}
                <p>{{ condition.condition_code }}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Thần kinh</h3>
            {% for condition in conditions.thankinh %}
                <p>{{ condition.condition_code }}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Cơ - Xương - Khớp</h3>
            {% for condition in conditions.cxk %}
                <p>{{condition.condition_code}}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Tai - Mũi - Họng</h3>
            {% for condition in conditions.tmh %}
                <p>{{condition.condition_code}}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Răng - Hàm - Mặt</h3>
            {% for condition in conditions.rhm %}
                <p>{{condition.condition_code}}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Mắt</h3>
            {% for condition in conditions.mat %}
                <p>{{condition.condition_code}}</p>
            {% endfor %}
        </div>
        <div>
            <h3>+ Nội tiết, dinh dưỡng và các bệnh lý khác</h3>
            {% for condition in conditions.noitiet %}
                <p>{{condition.condition_code}}</p>
            {% endfor %}
        </div>
    </div>
{% else %}
<div>
    <form action="" method="POST">
        {% csrf_token %}
        <div>
            <h2>1. Toàn thân</h2>
            <textarea name="toanthan"></textarea>
            <div>
                <label for="mach">Mạch</label>
                <input type="text" name="mach" id="mach">
                <br>
                <label for="nhietdo">Nhiệt độ</label>
                <input type="text" name="nhietdo" id="nhietdo">
                <br>
                <label for="huyetap">Huyết áp</label>
                <input type="text" name="huyetap" id="huyetap">
                <br>
                <label for="nhiptho">Nhịp thở</label>
                <input type="text" name="nhiptho" id="nhiptho">
                <br>
                <label for="cannang">Cân nặng</label>
                <input type="text" name="cannang" id="cannang">
            </div>
        </div>
        <div>
            <h2>2. Các cơ quan</h2>
            <div>
                <h3>+ Tuần hoàn</h3>
                <textarea name="tuanhoan"></textarea>
            </div>
            <div>
                <h3>+ Hô hấp</h3>
                <textarea name="hohap"></textarea>
            </div>
            <div>
                <h3>+ Tiêu hóa</h3>
                <textarea name="tieuhoa"></textarea>
            </div>
            <div>
                <h3>+ Thận - Tiết niệu - Sinh dục</h3>
                <textarea name="tts"></textarea>
            </div>
            <div>
                <h3>+ Thần kinh</h3>
                <textarea name="thankinh"></textarea>
            </div>
            <div>
                <h3>+ Cơ - Xương - Khớp</h3>
                <textarea name="cxk"></textarea>
            </div>
            <div>
                <h3>+ Tai - Mũi - Họng</h3>
                <textarea name="tmh"></textarea>
            </div>
            <div>
                <h3>+ Răng - Hàm - Mặt</h3>
                <textarea name="rhm"></textarea>
            </div>
            <div>
                <h3>+ Mắt</h3>
                <textarea name="mat"></textarea>
            </div>
            <div>
                <h3>+ Nội tiết, dinh dưỡng và các bệnh lý khác</h3>
                <textarea name="noitiet"></textarea>
            </div>
        </div>
        <button type="submit">Lưu lại</button>
    </form>
</div>
{% endif %}
{% endcomment %}
<div>
    <div>
        <h2>1. Toàn thân</h2>
            <table>
                <th>Tên triệu chứng</th>
                <th>Mức độ</th>
                {% for condition in conditions.toanthan %}
                    <tr id='{{condition.condition_identifier}}-data'>
                        <td class="cell-data-2">{{condition.condition_code}}</td>
                        <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                        <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                        <td>
                            <form action="{% url 'fhir:delete' %}" method="POST">
                                {%csrf_token%}
                                <input type="hidden" name="_method" value="delete">
                                <input type="hidden" name="resource_type" id="" value="condition">
                                <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                <button type="submit">Xóa</button>
                            </form>
                        </td>
                    </tr>
                    <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                        <form action="" method="POST">
                            <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="toanthan">
                            <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                            {%with 'value:'|add:condition.condition_code as code%}
                                <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                            {%endwith%}                       
                            {%with 'value:'|add:condition.condition_severity as code%}
                                <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                            {%endwith%}
                            <td><button type="submit">Lưu</button></td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                        </form>
                    </tr>
                {% endfor %}
                <tr>
                    <form action="" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="classifier" id="" value="condition">
                        <input type="hidden" name="condition_category" id="" value="toanthan">
                        <td class="cell-data-2">{{condition_form.condition_code}}</td>
                        <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                        <td><button type="submit">Thêm</button></td>
                    </form>
                </tr>
            </table>
    </div>
    <div>
        <h2>2. Các cơ quan</h2>
            <div>
                <div>
                    <h3>+ Tuần hoàn</h3>
                    <table>
                        <th>Tên triệu chứng</th>
                        <th>Mức độ</th>
                        {% for condition in conditions.tuanhoan %}
                            <tr id='{{condition.condition_identifier}}-data'>
                                <td class="cell-data-2">{{condition.condition_code}}</td>
                                <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                                <td>
                                    <form action="{% url 'fhir:delete' %}" method="POST">
                                        {%csrf_token%}
                                        <input type="hidden" name="_method" value="delete">
                                        <input type="hidden" name="resource_type" id="" value="condition">
                                        <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                        <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                        <button type="submit">Xóa</button>
                                    </form>
                                </td>
                            </tr>
                            <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                                <form action="" method="POST">
                                    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                    <input type="hidden" name="classifier" id="" value="condition">
                                    <input type="hidden" name="condition_category" id="" value="tuanhoan">
                                    <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                    {%with 'value:'|add:condition.condition_code as code%}
                                        <td>{{condition_form.condition_code|attr:code}}</td>
                                    {%endwith%}                           
                                    {%with 'value:'|add:condition.condition_severity as code%}
                                        <td>{{condition_form.condition_severity|attr:code}}</td>
                                    {%endwith%}
                                    <td><button type="submit">Lưu</button></td>
                                    <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                                </form>
                            </tr>
                        {% endfor %}
                        <tr>
                            <form action="" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="tuanhoan">
                                <td class="cell-data-2">{{condition_form.condition_code}}</td>
                                <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                                <td><button type="submit">Thêm</button></td>
                            </form>
                        </tr>
                    </table>
                </div>
                <div>
                    {% if observations %}
                        <div class="vital-signs">
                            <div class="flex_container">
                                <p class="title"><b>Mạch:</b></p><p class="value"> {{ observations.mach.observation_value_quantity }} lần/ph</p>
                            </div>
                            <div class="flex_container">
                                <p class="title"><b>Nhiệt độ:</b></p><p class="value">{{ observations.nhietdo.observation_value_quantity }} Cel</p>
                            </div>
                            <div class="flex_container">
                                <p class="title"><b>Huyết áp:</b></p><p class="value">{{ observations.tamthu.observation_value_quantity }}/{{ observations.tamtruong.observation_value_quantity }} mmHg</p>
                            </div>
                            <div class="flex_container">
                                <p class="title"><b>Nhịp thở:</b></p><p class="value">{{ observations.nhiptho.observation_value_quantity }} lần/ph</p>
                            </div>
                            <div class="flex_container">
                                <p class="title"><b>Cân nặng:</b></p><p class="value">{{ observations.cannang.observation_value_quantity }} kg</p>
                            </div>
                        </div>
                    {% else %}
                    <table>
                        <tr>
                            <td>
                                <form action="" method="POST">
                                    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                    <input type="hidden" name="classifier" id="" value="observation">
                                    <div class="flex_container">
                                        <label class="title" for="mach">Mạch</label>
                                        <input class="value" type="text" name="mach" id="mach">
                                    </div>
                                    <br>
                                    <div class="flex_container">
                                        <label class="title" for="nhietdo">Nhiệt độ</label>
                                        <input type="text" name="nhietdo" id="nhietdo">
                                    </div>
                                    <br>
                                    <div class="flex_container">
                                        <label class="title" for="huyetap">Huyết áp</label>
                                        <input type="text" name="huyetaptamthu" id="huyetaptamthu">/<input type="text" name="huyetaptamtruong" id="huyetaptamtruong">
                                    </div>
                                    <br>
                                    <div class="flex_container">
                                        <label class="title" for="nhiptho">Nhịp thở</label>
                                        <input type="text" name="nhiptho" id="nhiptho">
                                    </div>
                                    <br>
                                    <div class="flex_container">
                                        <label class="title" for="cannang">Cân nặng</label>
                                        <input type="text" name="cannang" id="cannang">      
                                    </div>
                                </td>
                                <td style='width:16%;'>
                                    <button type="submit">lưu lại</button>                  
                                </td>
                                </form>
                                </tr>
                                </table>

                    {% endif %}
                </div>
            </div> 
            <div>
                <h3>+ Hô hấp</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.hohap %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <form action="{% url 'fhir:delete' %}" method="POST">
                                {%csrf_token%}
                                <input type="hidden" name="_method" value="delete">
                                <input type="hidden" name="resource_type" id="" value="condition">
                                <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                <button type="submit">Xóa</button>
                            </form>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="hohap">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                        
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="hohap">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div> 
            <div>
                <h3>+ Tiêu hóa</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.tieuhoa %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="tieuhoa">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                          
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="tieuhoa">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div>   
            <div>
                <h3>+ Thận - Tiết niệu - Sinh dục</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.tts %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="tts">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                          
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="tts">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div> 
            <div>
                <h3>+ Thần kinh</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.thankinh %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="thankinh">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="thankinh">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div> 
            <div>
                <div>
                <h3>+ Cơ Xương Khớp</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.cxk %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="cxk">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                           
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="cxk">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div> 
            <div>            
                <h3>+ Tai - Mũi - Họng</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.tmh %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="tmh">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                           
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="tmh">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div>            
            <div>            
                <h3>+ Răng - Hàm - Mặt</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.rhm %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="rhm">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                           
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="rhm">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div>    
            <div>
                <h3>+ Mắt</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.mat %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="mat">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                        
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2">{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="mat">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div> 
            <div>
                <h3>+ Nội tiết, dinh dưỡng và các bệnh lý khác</h3>
                <table>
                    <th>Tên triệu chứng</th>
                    <th>Mức độ</th>
                    {% for condition in conditions.noitiet %}
                        <tr id='{{condition.condition_identifier}}-data'>
                            <td class="cell-data-2">{{condition.condition_code}}</td>
                            <td class="cell-data-2">{{severity|get_item:condition.condition_severity}}</td>
                            <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Chỉnh sửa</button></td>
                            <td>
                                <form action="{% url 'fhir:delete' %}" method="POST">
                                    {%csrf_token%}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="resource_type" id="" value="condition">
                                    <input type="hidden" name="url_next" value="{{request.get_full_path}}">
                                    <input type="hidden" name="resource_identifier" value="{{condition.condition_identifier}}">
                                    <button type="submit">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        <tr style="display: none;" id="{{condition.condition_identifier}}-form">
                            <form action="" method="POST">
                                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                                <input type="hidden" name="classifier" id="" value="condition">
                                <input type="hidden" name="condition_category" id="" value="noitiet">
                                <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
                                {%with 'value:'|add:condition.condition_code as code%}
                                    <td class="cell-data-2">{{condition_form.condition_code|attr:code}}</td>
                                {%endwith%}                           
                                {%with 'value:'|add:condition.condition_severity as code%}
                                    <td class="cell-data-2"{{condition_form.condition_severity|attr:code}}</td>
                                {%endwith%}
                                <td><button type="submit">Lưu</button></td>
                                <td><button type="button" onclick="toggleDisplay('{{condition.condition_identifier}}')">Hủy</button></td>
                            </form>
                        </tr>
                    {% endfor %}
                    <tr>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="classifier" id="" value="condition">
                            <input type="hidden" name="condition_category" id="" value="noitiet">
                            <td class="cell-data-2">{{condition_form.condition_code}}</td>
                            <td class="cell-data-2">{{condition_form.condition_severity}}</td>
                            <td><button type="submit">Thêm</button></td>
                        </form>
                    </tr>
                </table>
            </div>                                                                                            
    </div>    
</div>
<script>
    function toggleDisplay(elementId){
        data = document.getElementById(elementId + '-data');
        form = document.getElementById(elementId + '-form');
        if (data.style.display == 'none'){
            data.style.display = 'table-row';
            form.style.display = 'none';
        }
        else{
            data.style.display = 'none';
            form.style.display = 'table-row';
        }
    }
</script>
{% endblock %}