{%extends 'fhir/base.html'%}
{%block url1%}'{%url 'fhir:hanhchinh' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url2%}'{%url 'fhir:dangky' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url3%}'{%url 'fhir:hoibenh' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url5%}'{%url 'fhir:xetnghiem' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url4%}'{%url 'fhir:toanthan' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url6%}'{%url 'fhir:thuthuat' group_name user_name data.Patient.identifier data.Encounter.identifier%}'{%endblock%}
{%block url7%}'{%url 'fhir:thuoc' group_name user_name data.Patient.identifier data.Encounter.identifier %}'{%endblock%}
{% load widget_tweaks %}
{%block function%}
    {%if condition%}
    <div id='data'>
        <h1>THÔNG TIN HỎI BỆNH</h1>
        <p>Vấn đề lâm sàng: {{condition.condition_code}}</p>
        <p>Tình trạng: {{clinical|get_item:condition.condition_clinicalstatus}}</p>
        <p>Dấu hiệu bắt đầu từ ngày: {{condition.condition_onset|date:"d-m-Y"}}</p>
        <p>Mức độ: {{severity|get_item:condition.condition_severity}}</p>
    </div>
    <div id='form' style="display: none;">
        <form action="" method="POST">
            {%csrf_token%}
        {%with 'value:'|add:condition.condition_identifier as code%}
        {{condition.condition_identifier}}
        <input type="hidden" name="condition_identifier" value="{{condition.condition_identifier}}">
        {%endwith%}
        {%with 'value:'|add:condition.condition_code as code%}
        <label for="id_condition_code">Vấn đề lâm sàng:</label>
        <p>{{form.condition_code|attr:code}}</p>
        {%endwith%}
        {%with 'value:'|add:condition.condition_clinicalstatus as code%}
       
        <label for="id_condition_clinicalstatus">Tình trạng:</label>
        <p>{{form.condition_clinicalstatus|attr:code}}</p>
        {%endwith%}
        {%with condition.condition_onset|date:'Y-m-d' as condition_date%}
        {%with 'value:'|add:condition_date as code%}
       
        <label for="id_condition_onset">Dấu hiệu bắt đầu từ ngày:</label>
        <p>{{form.condition_onset|attr:code}}</p>
        {%endwith%}
        {%endwith%}
        {%with 'value:'|add:condition.condition_severity as code%}
        
        <label for="id_condition_severity">Mức độ:</label>
        <p>{{form.condition_severity|attr:code}}</p>
        {%endwith%}
        <button type="submit">Lưu lại</button>
    </form>
    </div>
    <div class="button">
        <button id="clickButton" onclick="changeDisplay()">Chỉnh sửa</button>
    </div>
    <script>
        function changeDisplay(){
            button = document.getElementById('clickButton');
            data = document.getElementById('data');
            form = document.getElementById('form');
            if (button.textContent == "Chỉnh sửa"){
                data.style.display = "none";
                form.style.display = "block";
                button.textContent = "Hủy bỏ"
            }
            else{
                data.style.display = "block";
                form.style.display = "none";
                button.textContent = "Chỉnh sửa"
            }
        }
    </script>
    {%else%}
        <form action="" method = "POST">
            {%csrf_token%}
            {{form.as_p}}
            <button type="submit">Lưu lại</button>
        </form>
    {%endif%}
{%endblock%}